@model AMS.ViewModel.GenerateStudentRollNumberViewModel

<script src="@Url.Content("~/Scripts/fnReloadAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js") " type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/rowReordering.js")" type="text/javascript"></script>
<div class="container-fluid">


    <div id="SuccessMessage" style="display:none;color:#000;" class="alert"></div>
    @*<div class="row-fluid">
        @*<div class="span12">*@
    <ul class="breadcrumb">
        <li>Student<span class="divider">»</span></li>
        <li>Branch Promotion</li>
    </ul>
    <div class="widget-block">
        <div class="widget-head">
            <h5 id="hFive">
                Generate Roll Number

            </h5>

        </div>
        <div class="widget-box" id="EmployeeContactDetails">

            <form id="FormGenerateStudentRollNumber" method="post" class="form-horizontal well">
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true)



                <div class="row-fluid">
                    <div class="span12">
                        <div class="widget-block">
                            <div class="widget-head">
                                <h5>Filter Student</h5>
                            </div>
                            <div class="widget-content">
                                <div class="widget-box">
                                    <br />
                                    <fieldset>

                                        <div class="control-group" style="margin-bottom:5px">

                                            <div class="span2">
                                                @Html.LabelFor(m => m.CentreName, new { @class = "control-label", style = "font-weight:bold" })
                                            </div>
                                            <div class="span3" style="line-height: 25px">

                                                @Html.DropDownListFor(m => m.SelectedCentreCode, Model.StudyCentreListMasterItems, "---------select Centre---------", new { @class = "", style = "font-weight:bold" })
                                                <br />
                                                @Html.ValidationMessageFor(m => m.SelectedCentreCode)


                                            </div>
                                            <div class="span2">
                                                @Html.LabelFor(m => m.SelectedUniversityID, new { @class = "control-label", style = "font-weight:bold" })
                                            </div>
                                            <div class="span2" style="line-height: 20px">

                                                @Html.DropDownListFor(m => m.SelectedUniversityID, Model.ListOrganisationUnivesitytMasterItems, "---------select University---------", new { @class = "", style = "font-weight:bold" })
                                                <br />
                                                @Html.ValidationMessageFor(m => m.SelectedUniversityID)
                                            </div>
                                        </div>


                                        <div class="control-group" style="margin-bottom:5px">

                                            <div class="span2">
                                                @Html.LabelFor(m => m.BranchDescription, new { @class = "control-label", style = "font-weight:bold" })
                                            </div>
                                            <div class="span3" style="line-height: 25px">

                                                @Html.DropDownListFor(m => m.SelectedBranchID, Model.BranchListRoleWiseMasterItems, "---------select Course---------", new { @class = "", style = "font-weight:bold" })
                                                <br />
                                                @Html.ValidationMessageFor(m => m.SelectedBranchID)


                                            </div>
                                            @if (Model.IsFirstYearPromotion == false)
                                            {
                                                <div class="span2">
                                                    @Html.LabelFor(m => m.SectionDetails, new { @class = "control-label SectionDetails", style = "font-weight:bold" })
                                                    @Html.LabelFor(m => m.PromotedToNextSection, new { @class = "control-label PromotedToNextSection", style = "font-weight:bold;display:none" })
                                                </div>
                                                <div class="span2" style="line-height: 20px">

                                                    @Html.DropDownListFor(m => m.SelectedSectionDetRoleWiseID, Model.SectionDetListRoleWiseMasterItems, "---------select Section---------", new { @class = "", style = "font-weight:bold" })
                                                    <br />
                                                    @Html.ValidationMessageFor(m => m.SelectedSectionDetRoleWiseID)

                                                </div>
                                            }

                                            @if (Model.IsFirstYearPromotion == true)
                                            {
                                                <div class="span2">
                                                    @Html.LabelFor(m => m.PromotedToNextSection, new { @class = "control-label", style = "font-weight:bold" })
                                                </div>
                                                <div class="span2" style="line-height: 20px">

                                                    @Html.DropDownListFor(m => m.SelectedSectionDetRoleWiseID, Model.SectionDetListRoleWiseMasterItems, "---------select Section---------", new { @class = "", style = "font-weight:bold" })
                                                    <br />
                                                    @Html.ValidationMessageFor(m => m.SelectedSectionDetRoleWiseID)

                                                </div>
                                            }

                                        </div>

                                        <div class="control-group" style="margin-bottom:5px">

                                            <div class="span2">
                                                @Html.LabelFor(m => m.SessionName, new { @class = "control-label", style = "font-weight:bold" })
                                            </div>
                                            <div class="span2" style="line-height: 25px">

                                                @Html.DropDownListFor(m => m.SelectedSessionID, Model.SessionListMasterItems, "---------select Session---------", new { @class = "", style = "font-weight:bold" })
                                                <br />
                                                @Html.ValidationMessageFor(m => m.SelectedSessionID)

                                            </div>
                                            <div class="span4">
                                                @*@Html.LabelFor(m => m.IsFirstYearPromotion, new { @class = "", style = "font-weight:bold;text-align:left;margin-left:90px" })*@
                                            </div>
                                            <div class="span2" style="line-height: 20px">
                                                @*@Html.CheckBoxFor(m => m.IsFirstYearPromotion, new { @class = "control-label ", style = "font-weight:bold" })*@
                                            </div>
                                        </div>


                                    </fieldset>
                                    <br />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row-fluid">
                    <div class="span6">
                        <div class="widget-block">
                            <div class="widget-head">
                                <h5> Set Sequence</h5>
                            </div>
                            <div class="widget-content">
                                <div class="widget-box ucase">

                                    <fieldset>
                                        @*<div class="control-group" style="margin-left:50px">

                                                @Html.CheckBox("orderByRollNumber") Roll Number

                                                @Html.DisplayFor(m => m.RollNoSortOrder, new { @class = "control-label", style = "font-weight:bold;line-height: 5px" })
                                                <div class="controls">
                                                    @Html.TextBoxFor(m => m.RollNoSortOrder)

                                                </div>
                                            </div>

                                            <div class="control-group" style="margin-left:50px">
                                                @Html.CheckBox("orderByFirstName") First Name

                                                @Html.DisplayFor(m => m.FirstName, new { @class = "control-label", style = "font-weight:bold;line-height: 5px" })
                                                <div class="controls">
                                                    @Html.TextBoxFor(m => m.FirstName)
                                                </div>
                                            </div>

                                            <div class="control-group" style="margin-left:50px">
                                                @Html.CheckBox("orderByLastName") Last Name

                                                @Html.DisplayFor(m => m.LastName, new { @class = "control-label", style = "font-weight:bold;line-height: 5px" })
                                                <div class="controls">
                                                    @Html.TextBoxFor(m => m.LastName)
                                                </div>
                                            </div>

                                            <div class="control-group" style="margin-left:50px">
                                                @Html.CheckBox("orderByAcademicYear") AcademicYear

                                                @Html.DisplayFor(m => m.AcademicYear, new { @class = "control-label", style = "font-weight:bold;line-height: 5px" })
                                                <div class="controls">
                                                    @Html.TextBoxFor(m => m.AcademicYear)
                                                </div>
                                            </div>

                                            <div class="control-group" style="margin-left:50px">
                                                @Html.CheckBox("orderByStudentCode") Student Code

                                                @Html.DisplayFor(m => m.StudentCode, new { @class = "control-label", style = "font-weight:bold;line-height: 5px" })
                                                <div class="controls">
                                                    @Html.TextBoxFor(m => m.StudentCode)
                                                </div>
                                            </div>*@

                                        <table id="sequenceOrder">
                                            <thead>
                                                <tr>
                                                    <th style="text-align:center">Priority</th>
                                                    <th style="width: 80%; text-align: center">
                                                        Order By
                                                    </th>
                                                    <th style="text-align:center">
                                                        Select
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td style="text-align:center"><span><i class="nav-icon list"></i></span></td>
                                                    <td style="text-align:center">Roll Number</td>
                                                    <td style="text-align:center"><input type="checkbox" id="rollnumber" /></td>
                                                </tr>
                                                <tr>
                                                    <td style="text-align:center"><span><i class="nav-icon list"></i></span></td>
                                                    <td style="text-align:center">First Name</td>
                                                    <td style="text-align:center"><input type="checkbox" id="firstName" /></td>
                                                </tr>
                                                <tr>
                                                    <td style="text-align:center"><span><i class="nav-icon list"></i></span></tdstyle>
                                                    <td style="text-align:center">Last Name</td>
                                                    <td style="text-align:center"><input type="checkbox" id="lastName" /></td>
                                                </tr>
                                                <tr>
                                                    <td style="text-align:center"><span><i class="nav-icon list"></i></span></td>
                                                    <td style="text-align:center">Gender</td>
                                                    <td style="text-align:center"> <input type="checkbox" id="Gender" /></td>
                                                </tr>
                                            </tbody>
                                        </table>

                                        <div class="widget-bottom" style="text-align:right;line-height:40px;">
                                            <input type="button" id="btnGenerateRollNoShowList" style="margin-right:35px" class="btn btn-primary" value="Show List" />
                                            <br>
                                            <br>
                                        </div>


                                    </fieldset>

                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="span6">
                        <div class="widget-block">
                            <div class="widget-head">
                                <h5>Generate New Roll Number</h5>
                            </div>
                            <div class="widget-content">
                                <div class="widget-box">

                                    <fieldset>
                                        <br />
                                        <div class="control-group">
                                            @Html.LabelFor(m => m.RollNoSortOrder, new { @class = "control-label", style = "font-weight:bold" })
                                            <div class="controls">
                                                @Html.TextBoxFor(m => m.RollNoSortOrder)
                                                <br />
                                                @Html.ValidationMessageFor(m => m.RollNoSortOrder)
                                            </div>
                                        </div>

                                        <div class="widget-bottom" style="text-align:right;line-height:40px;">
                                            <input type="button" id="btnotherThanFirstYearStudentList" style="margin-right:35px" class="btn btn-primary" value="Generate Roll No." />
                                            <br>
                                            <br>
                                        </div>
                                    </fieldset>

                                </div>
                            </div>
                        </div>
                    </div>

                </div>








                <div id="otherThanFirstYearStudentList">
                    <div class="widget-head">
                        <h5 id="hhFive"><i class="black-icons users"></i>&nbsp; Other Than First Year</h5>
                        <div class="widget-block">
                            <div class="widget-content">
                                <div class="widget-box">
                                    <div id="DataTables_Table_1_wrapper" class="dataTables_wrapper" role="grid">
                                        <div class="table_content">
                                            <table id="OtherThanFirstYearStudentList" class="table table-striped table-bordered">
                                                <thead>
                                                    <tr>


                                                        <th style="text-align: center; width: 300px; line-height: 10px">StudentName</th>
                                                        <th style="text-align: center; width: 25%; line-height: 10px">Promot to Section</th>
                                                        <th style="text-align: center;width:15%;line-height:10px"> @Html.CheckBox("selectAll", new { style = "line-height:35px", @class = "selectedAllCheck" })</th>

                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>

                                        <div class="widget-bottom" style="text-align:right;line-height:40px;">
                                            <input type="button" id="btnotherThanFirstYearStudentList" style="margin-right:35px" class="btn btn-primary" value="Save Existing No" />
                                            <input type="button" id="btnotherThanFirstYearStudentList" style="margin-right:35px" class="btn btn-primary" value="Save New Roll No" />
                                            <br>
                                            <br>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" style="padding-left: 0px; padding-bottom: 0px; text-align: right">

                    </div>
                </div>




            </form>
        </div>
    </div>
    @*</div>*@


</div>

<script type="text/javascript">
    $(document).ready(function () {
        GenerateStudentRollNumber.Initialize();


        var oTable = $('#OtherThanFirstYearStudentList').dataTable({
            "bServerSide": true,
            "sAjaxSource": "GenerateStudentRollNumber/AjaxHandlerOtherThanFirstYear",
            //"bJQueryUI": true,
            "scrollY": "300px",
            "dom": "frtiS",
            "deferRender": true,

            "bProcessing": true,
            "oLanguage": {
                "sInfoEmpty": "",
            },
            "fnServerParams": function (aoData) {
                aoData.push({ "name": "centreCode", "value": $("#SelectedCentreCode").val() });
                aoData.push({ "name": "sectionDetailsID", "value": $("#SelectedSectionDetRoleWiseID").val() });
                aoData.push({ "name": "sessionID", "value": $("#SelectedSessionID").val() });
                aoData.push({ "name": "isFirstYearPromotion", "value": $('input[name=IsFirstYearPromotion]:checked').val() ? true : false });
            },
            "columnDefs": [


                                 {
                                     "targets": 0,
                                     "bSortable": false,
                                     "data": null,
                                     "render": function (data, type, full, meta) {
                                         if (data != null) {
                                             var result = data[0]
                                             return result;
                                         }
                                         else {
                                             return null;
                                         }

                                     }
                                 },
                                 {
                                     "targets": 1,
                                     "bSortable": false,
                                     "data": null,
                                     "render": function (data, type, full, meta) {
                                         if (data[1] != null) {
                                             var result = data[1]
                                             return result;
                                         }
                                         else {
                                             var result = '<p  style="text-align: center; height:5px;"><span style="text-align: center; height:5px;" class="label label-important">Section not defined</span></p>';
                                             return result;
                                         }

                                     }
                                 },
                                  {
                                      "targets": 2,
                                      "bSortable": false,
                                      "data": null,
                                      "render": function (data, type, full, meta) {

                                          if (data[1] != null) {
                                              var result = "<p  style=' height:5px;text-align:center'>" + "<input type='checkbox' value= '" + data[2] + "' class='check' id='chkSelectedStudent' />" + "</p>";
                                              return result;
                                          }
                                          else {
                                              var result = "<p  style=' height:5px;text-align:center'>" + "<input type='checkbox' value= '" + data[2] + "' class='check' id='chkSelectedStudent' disabled />" + "</p>";
                                              return result;
                                          }

                                      }
                                  },


            ],
            //"fnRowCallback": function (nRow, aData, iDisplayIndex) {
            //    $("td:first", nRow).html("<p  style=' height:5px;text-align:center'>" + (iDisplayIndex + 1) + "</p>");
            //    return nRow;
            //},

        });

        var t = $("#sequenceOrder").dataTable({
            "columnDefs": [
                 {
                     "targets": 0,
                     "bSortable": false,
                 },
                 {
                     "targets": 1,
                     "bSortable": false,
                 },
            ]
        });
        t.rowReordering();
    });





</script>


<style type="text/css">
    .columnDisplay {
        display: none;
    }
</style>

